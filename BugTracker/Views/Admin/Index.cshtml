@model IEnumerable<BugTracker.Models.Helpers.AdminUserViewModels>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles {
    <!-- ===== Plugin CSS ===== -->
    <link rel="stylesheet" type="text/css" href="../plugins/components/gallery/css/animated-masonry-gallery.css" />
    <link rel="stylesheet" type="text/css" href="../plugins/components/fancybox/ekko-lightbox.min.css" />
}

@if (User.IsInRole("Admin")) {
    <div class="row">
        <div class="col-md-12 col-xs-12">
            <div class="white-box">
                <ul class="nav nav-tabs tabs customtab">

                    <li class="active col-xs-2 btn btn-primary">
                        <a href="#allUsers" data-toggle="tab"><span>All Users</span> </a>
                    </li>
                    <li class="col-xs-1">&nbsp;</li>
                    <li class="tab col-xs-2 btn btn-danger">
                        <a href="#administrators" data-toggle="tab"><span class="">All Administrators</span> </a>
                    </li>
                    <li class="col-xs-1">&nbsp;</li>
                    <li class="tab col-xs-2  btn btn-warning">
                        <a href="#projectManagers" data-toggle="tab"><span class="">All Project Managers</span> </a>
                    </li>
                    <li class="col-xs-4">&nbsp;</li>
                    <br />
                    <br />
                    <br />
                    <li class="tab col-xs-2 btn btn-success">
                        <a href="#developers" data-toggle="tab"><span class="">All Developers</span> </a>
                    </li>
                    <li class="col-xs-1">&nbsp;</li>
                    <li class="tab col-xs-2 btn btn-info">
                        <a href="#submitters" data-toggle="tab"><span class="">All Submitters</span> </a>
                    </li>
                    <li class="col-xs-1">&nbsp;</li>
                    <li class="tab col-xs-2 btn btn-roseybrown">
                        <a href="#multiRoles" data-toggle="tab"><span class="">Multiple Roles</span> </a>
                    </li>
                    <li class="col-xs-4">&nbsp;</li>
                </ul>

                <div class="tab-content">
                    <!-- ALL USERS -->
                    <div class="tab-pane active" id="allUsers">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-box table-responsive">
                                    <h3 class="header-title m-t-0 m-b-30">All Users</h3>
                                    <table id="datatable_allUsers" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>@Html.DisplayNameFor(model => model.User.FullName)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Email)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Roles)</th>
                                                <th>Options</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model) {
                                                <tr>
                                                    <td>@Html.DisplayFor(modelItem => item.User.FullName)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.User.Email)</td>
                                                    <td>
                                                        @if (item.User.Roles != null) {
                                                            foreach (var role in item.AssignedRoles) {
                                                            <p>@role</p>
                                                        }
                                                        }
                                                    </td>
                                                    <td>@Html.ActionLink("Edit Roles", "EditUserRoles", new { id = item.User.Id })</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- end col -->
                        </div>
                    </div>
                    <hr />
                    <!-- ALL ADMINISTRATORS -->
                    <div class="tab-pane" id="administrators">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-box table-responsive">
                                    <h3 class="header-title m-t-0 m-b-30">All Administrators</h3>
                                    <table id="datatable_administrators" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>@Html.DisplayNameFor(model => model.User.FullName)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Email)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Roles)</th>
                                                <th>Options</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.Where(i => i.User.Roles.Any(r => r.RoleId == "15d6e5d2-56b5-4023-a411-c6029a989052"))) {
                                                <tr>
                                                    <td>@Html.DisplayFor(modelItem => item.User.FullName)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.User.Email)</td>
                                                    <td>
                                                        @if (item.User.Roles != null) {
                                                            foreach (var role in item.AssignedRoles) {
                                                            <p>@role</p>
                                                        }
                                                        }
                                                    </td>
                                                    <td>@Html.ActionLink("Edit Roles", "EditUserRoles", new { id = item.User.Id })</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- end col -->
                        </div>
                    </div>
                    <hr />
                    <!-- ALL PROJECTMANAGERS -->
                    <div class="tab-pane" id="projectManagers">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-box table-responsive">
                                    <h3 class="header-title m-t-0 m-b-30">All Project Managers</h3>
                                    <table id="datatable_projectManagers" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>@Html.DisplayNameFor(model => model.User.FullName)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Email)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Roles)</th>
                                                <th>Options</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.Where(i => i.User.Roles.Any(r => r.RoleId == "5e1d6394-7712-4389-bfee-eecc30b2b985"))) {
                                                <tr>
                                                    <td>@Html.DisplayFor(modelItem => item.User.FullName)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.User.Email)</td>
                                                    <td>
                                                        @if (item.User.Roles != null) {
                                                            foreach (var role in item.AssignedRoles) {
                                                            <p>@role</p>
                                                        }
                                                        }
                                                    </td>
                                                    <td>@Html.ActionLink("Edit Roles", "EditUserRoles", new { id = item.User.Id })</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- end col -->
                        </div>
                    </div>
                    <hr />
                    <!-- ALL DEVELOPERS -->
                    <div class="tab-pane" id="developers">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-box table-responsive">
                                    <h3 class="header-title m-t-0 m-b-30">All Developers</h3>
                                    <table id="datatable_developers" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>@Html.DisplayNameFor(model => model.User.FullName)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Email)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Roles)</th>
                                                <th>Options</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.Where(i => i.User.Roles.Any(r => r.RoleId == "f6c4f96d-cab2-4667-b3da-70b9165f344c"))) {
                                                <tr>
                                                    <td>@Html.DisplayFor(modelItem => item.User.FullName)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.User.Email)</td>
                                                    <td>
                                                        @if (item.User.Roles != null) {
                                                            foreach (var role in item.AssignedRoles) {
                                                            <p>@role</p>
                                                        }
                                                        }
                                                    </td>
                                                    <td>@Html.ActionLink("Edit Roles", "EditUserRoles", new { id = item.User.Id })</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- end col -->
                        </div>
                    </div>
                    <hr />
                    <!-- ALL SUBMITTERS -->
                    <div class="tab-pane" id="submitters">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-box table-responsive">
                                    <h3 class="header-title m-t-0 m-b-30">All Submitters</h3>
                                    <table id="datatable_submitters" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>@Html.DisplayNameFor(model => model.User.FullName)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Email)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Roles)</th>
                                                <th>Options</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.Where(i => i.User.Roles.Any(r => r.RoleId == "bab7637d-3aba-4a75-b243-b08e1a8440d1"))) {
                                                <tr>
                                                    <td>@Html.DisplayFor(modelItem => item.User.FullName)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.User.Email)</td>
                                                    <td>
                                                        @if (item.User.Roles != null) {
                                                            foreach (var role in item.AssignedRoles) {
                                                            <p>@role</p>
                                                        }
                                                        }
                                                    </td>
                                                    <td>@Html.ActionLink("Edit Roles", "EditUserRoles", new { id = item.User.Id })</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- end col -->
                        </div>
                    </div>
                    <hr />
                    <!-- ALL USERS WITH MULTIPLE ROLES -->
                    <div class="tab-pane" id="multiRoles">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-box table-responsive">
                                    <h3 class="header-title m-t-0 m-b-30">All Users With Multiple Roles</h3>
                                    <table id="datatable_multiRoles" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>@Html.DisplayNameFor(model => model.User.FullName)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Email)</th>
                                                <th>@Html.DisplayNameFor(model => model.User.Roles)</th>
                                                <th>Options</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.Where(i => i.User.Roles.Count() > 1)) {
                                                <tr>
                                                    <td>@Html.DisplayFor(modelItem => item.User.FullName)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.User.Email)</td>
                                                    <td>
                                                        @if (item.User.Roles != null) {
                                                            foreach (var role in item.AssignedRoles) {
                                                            <p>@role</p>
                                                        }
                                                        }
                                                    </td>
                                                    <td>@Html.ActionLink("Edit Roles", "EditUserRoles", new { id = item.User.Id })</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- end col -->
                        </div>
                    </div>
                </div>
                    <hr />
        </div>
        </div>
    </div>
@section Scripts {
    <!-- DataTables -->
    <script src="~/Content/DataTables/datatables.min.js"></script>

    <!-- Sort by Created Date -->
    <script>$("#datatable_allUsers").DataTable({ "order": [[0, 'desc']] });</script>
    <script>$("#datatable_administrators").DataTable({ "order": [[0, 'desc']] });</script>
    <script>$("#datatable_projectManagers").DataTable({ "order": [[0, 'desc']] });</script>
    <script>$("#datatable_developers").DataTable({ "order": [[0, 'desc']] });</script>
    <script>$("#datatable_submitters").DataTable({ "order": [[0, 'desc']] });</script>
    <script>$("#datatable_multiRoles").DataTable({ "order": [[0, 'desc']] });</script>


}
}