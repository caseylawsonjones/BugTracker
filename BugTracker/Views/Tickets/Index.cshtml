@model BugTracker.Models.Helpers.TicketsListViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles {
    <!-- ===== Plugin CSS ===== -->
    <link rel="stylesheet" type="text/css" href="../plugins/components/gallery/css/animated-masonry-gallery.css" />
    <link rel="stylesheet" type="text/css" href="../plugins/components/fancybox/ekko-lightbox.min.css" />
}

@if (User.IsInRole("Admin")) {
    <div class="row">
        <div class="col-md-12 col-xs-12">
            <div class="white-box">
                <ul class="nav nav-tabs tabs customtab">
                    <li class="tab">
                        <a href="#adminCritical" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">All Critical Tickets</span> </a>
                    </li>
                    <li class="tab">
                        <a href="#adminHigh" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">All High Priority Tickets</span> </a>
                    </li>
                    <li class="tab">
                        <a href="#adminNotUpdated" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">All Tickets With No Updates in the Last Week</span> </a>
                    </li>
                    <li class="tab">
                        <a href="#adminUnassigned" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">All Unassigned Tickets</span> </a>
                    </li>
                    <li class="active tab">
                        <a href="#adminAllTickets" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">Tickets for All Projects</span> </a>
                    </li>
                    @if(User.IsInRole("ProjectManager")){
                    <li class="active tab">
                        <a href="#adminProjectManager" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">Tickets for My Assigned Projects</span> </a>
                    </li>
                    }
                    @if(User.IsInRole("Developer")){
                    <li class="active tab">
                        <a href="#adminDeveloper" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">My Assigned Tickets</span> </a>
                    </li>
                    }
                    @if(User.IsInRole("Submitter")){
                    <li class="active tab">
                        <a href="#adminSubmitter" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">My Submitted Tickets</span> </a>
                    </li>
                    }
                </ul>

                <!-------------------------->
                <!-- ADMIN TABLES SECTION -->
                <!-------------------------->
                <!-- ADMIN - CRITICAL TICKETS -->
                <div class="tab-content">
                    @if (User.IsInRole("Admin")) {
                        <div class="tab-pane active" id="adminCritical">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">All Critical Tickets</h3>
                                        <table id="datatable-AdminPM" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.AllTickets != null) {
                                                    foreach (var item in Model.AllTickets.Where(t => t.TicketPriority.Name == "Critical")) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td> }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!--ADMIN - HIGH PRIORITY TICKETS -->
                    @if (User.IsInRole("Admin")) {
                        <div class="tab-pane active" id="adminHigh">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">All High Priority Tickets</h3>
                                        <table id="datatable-AdminPM" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.AllTickets != null) {
                                                    foreach (var item in Model.AllTickets.Where(t => t.TicketPriority.Name == "High")) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td> }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!--ADMIN - TICKETS NOT UPDATED IN ONE WEEK -->
                    @if (User.IsInRole("Admin")) {
                        <div class="tab-pane active" id="adminNotUpdated">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">All Tickets With No Updates in the Last Week</h3>
                                        <table id="datatable-AdminPM" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.AllTickets != null) {
                                                    foreach (var item in Model.AllTickets.Where(t => t.Updated > DateTime.Now.Date.AddDays(-7))) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td>
                                                            }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!--ADMIN - UNASSIGNED TICKETS-->
                    @if (User.IsInRole("Admin")) {
                        <div class="tab-pane active" id="adminUnassigned">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">All Unassigned Tickets</h3>
                                        <table id="datatable-AdminPM" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.AllTickets != null) {
                                                    foreach (var item in Model.AllTickets.Where(t => t.AssignedUserId == null)) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td>
                                                            }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!-- ADMIN - ALL TICKETS FOR ALL PROJECTS-->
                    @if (User.IsInRole("Admin")) {
                        <div class="tab-pane active" id="adminAllTickets">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">All Tickets For All Projects</h3>
                                        <table id="datatable-AdminPM" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.AllTickets != null) {
                                                    foreach (var item in Model.AllTickets) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }


                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td> }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!-- Project Manager -->
                    @if (User.IsInRole("ProjectManager")) {
                        <div class="tab-pane" id="adminProjectManager">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">Tickets For My Assigned Projects</h3>
                                        <table id="datatable-ProjectManager" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.ProjectTickets != null) {
                                                    foreach (var item in Model.ProjectTickets) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</td>
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td>
                                                            }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!-- DEVELOPER ASSIGNED TICKETS -->
                    @if (User.IsInRole("Developer")) {
                        <div class="tab-pane" id="adminDeveloper">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">My Assigned Tickets</h3>
                                        <table id="datatable-Developer" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.AssignedTickets != null) {
                                                    foreach (var item in Model.AssignedTickets) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</td>
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td>
                                                            }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!-- SUBMITTED TICKETS -->
                    @if (User.IsInRole("Submitter")) {
                        <div class="tab-pane" id="adminSubmitter">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">My Submitted Tickets</h3>
                                        <table id="datatable-Submitter" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.SubmittedTickets != null) {
                                                    foreach (var item in Model.SubmittedTickets) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td> }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
}
else { 
if (User.IsInRole("ProjectManager")) {
    <div class="row">
        <div class="col-md-12 col-xs-12">
            <div class="white-box">
                <ul class="nav nav-tabs tabs customtab">
                    <li class="active tab">
                        <a href="#pmCritical" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">Critical Tickets</span> </a>
                    </li>
                    <li class="tab">
                        <a href="#pmHigh" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">High Priority Tickets</span> </a>
                    </li>
                    <li class="tab">
                        <a href="#pmNotUpdated" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">Tickets With No Updates in the Last Week</span> </a>
                    </li>
                    <li class="tab">
                        <a href="#pmUnassigned" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">Unassigned Tickets - My Projects</span> </a>
                    </li>
                    <li class="tab">
                        <a href="#pmProjectManager" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">Tickets for My Assigned Projects</span> </a>
                    </li>
                    @if(User.IsInRole("Developer")){
                        <li class="tab">
                            <a href="#pmDeveloper" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">My Assigned Tickets</span> </a>
                        </li>
                    }
                    @if(User.IsInRole("Submitter")){
                        <li class="tab">
                            <a href="#pmSubmitter" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">My Submitted Tickets</span> </a>
                        </li>
                    }
                </ul>

                <!------------------------------------>
                <!-- PROJECT MANAGER TABLES SECTION -->
                <!------------------------------------>
                <!-- PROJECT MANAGER - CRITICAL TICKETS -->
                <div class="tab-content">
                    @if (User.IsInRole("ProjectManager")) {
                        <div class="tab-pane active" id="pmCritical">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">Critical Tickets</h3>
                                        <table id="datatable-AdminPM" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.ProjectTickets != null) {
                                                    foreach (var item in Model.ProjectTickets.Where(t => t.TicketPriority.Name == "Critical")) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td> }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!--PROJECT MANAGER - HIGH PRIORITY TICKETS -->
                    @if (User.IsInRole("ProjectManager")) {
                        <div class="tab-pane active" id="pmHigh">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">High Priority Tickets</h3>
                                        <table id="datatable-AdminPM" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.ProjectTickets != null) {
                                                    foreach (var item in Model.ProjectTickets.Where(t => t.TicketPriority.Name == "High")) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }

                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td> }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!-- PROJECT MANAGER - TICKETS NOT UPDATED IN ONE WEEK -->
                    @if (User.IsInRole("ProjectManager")) {
                        <div class="tab-pane active" id="pmNotUpdated">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">Tickets With No Updates in the Last Week</h3>
                                        <table id="datatable-AdminPM" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.ProjectTickets != null) {
                                                    foreach (var item in Model.ProjectTickets.Where(t => t.Updated > DateTime.Now.Date.AddDays(-7))) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td>
                                                            }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!-- PROJECT MANAGER - UNASSIGNED TICKETS-->
                    @if (User.IsInRole("ProjectManager")) {
                        <div class="tab-pane active" id="pmUnassigned">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">Unassigned Tickets - My Projects</h3>
                                        <table id="datatable-AdminPM" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.ProjectTickets != null) {
                                                    foreach (var item in Model.ProjectTickets.Where(t => t.AssignedUserId == null)) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td>
                                                            }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!-- TICKETS FOR MY ASSIGNED PROJECTS -->
                    @if (User.IsInRole("ProjectManager")) {
                        <div class="tab-pane" id="pmProjectManager">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">Tickets For My Assigned Projects</h3>
                                        <table id="datatable-ProjectManager" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.ProjectTickets != null) {
                                                    foreach (var item in Model.ProjectTickets) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</td>
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td>
                                                            }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!-- DEVELOPER ASSIGNED TICKETS -->
                    @if (User.IsInRole("Developer")) {
                        <div class="tab-pane" id="pmDeveloper">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">My Assigned Tickets</h3>
                                        <table id="datatable-Developer" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.AssignedTickets != null) {
                                                    foreach (var item in Model.AssignedTickets) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</td>
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td>
                                                            }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                    <hr />

                    <!-- SUBMITTED TICKETS -->
                    @if (User.IsInRole("Submitter")) {
                        <div class="tab-pane" id="pmSubmitter">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="card-box table-responsive">
                                        <h3 class="header-title m-t-0 m-b-30">My Submitted Tickets</h3>
                                        <table id="datatable-Submitter" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                    <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.SubmittedTickets != null) {
                                                    foreach (var item in Model.SubmittedTickets) {
                                                        <tr>
                                                            <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                            @if (item.TicketPriority.Name == "Project") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Low") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Medium") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "High") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketPriority.Name == "Critical") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Resolved") {
                                                                <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Pending") {
                                                                <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "In Progress") {
                                                                <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Assigned") {
                                                                <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Submitted") {
                                                                <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Closed") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            @if (item.TicketStatus.Name == "Cancelled") {
                                                                <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                            }
                                                            <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                            <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                            @if (item.AssignedUser != null) {
                                                                <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                            }
                                                            else {
                                                                <td></td> }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end col -->
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
}
else {
if (User.IsInRole("Developer")) {
    <div class="row">
        <div class="col-md-12 col-xs-12">
            <div class="white-box">
                <ul class="nav nav-tabs tabs customtab">
                    <li class="active tab">
                        <a href="#devDeveloper" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">My Assigned Tickets</span> </a>
                    </li>
                    @if(User.IsInRole("Submitter")){
                        <li class="tab">
                            <a href="#devSubmitter" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">My Submitted Tickets</span> </a>
                        </li>
                    }
                </ul>

                <!-- DEVELOPER ASSIGNED TICKETS -->
                @if (User.IsInRole("Developer")) {
                    <div class="tab-pane" id="devDeveloper">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-box table-responsive">
                                    <h3 class="header-title m-t-0 m-b-30">My Assigned Tickets</h3>
                                    <table id="datatable-Developer" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (Model.AssignedTickets != null) {
                                                foreach (var item in Model.AssignedTickets) {
                                            <tr>
                                                <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                @if (item.TicketPriority.Name == "Project") {
                                                        <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "Low") {
                                                        <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "Medium") {
                                                        <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "High") {
                                                        <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "Critical") {
                                                        <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                <td class="center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</td>
                                                <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                @if (item.AssignedUser != null) {
                                                        <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                }
                                                else {
                                                        <td></td>
                                                }
                                            </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- end col -->
                        </div>
                    </div>
                }
                <hr />

                <!-- SUBMITTED TICKETS -->
                @if (User.IsInRole("Submitter")) {
                    <div class="tab-pane" id="devSubmitter">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-box table-responsive">
                                    <h3 class="header-title m-t-0 m-b-30">My Submitted Tickets</h3>
                                    <table id="datatable-Submitter" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (Model.SubmittedTickets != null) {
                                                foreach (var item in Model.SubmittedTickets) {
                                            <tr>
                                                <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                @if (item.TicketPriority.Name == "Project") {
                                                        <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "Low") {
                                                        <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "Medium") {
                                                        <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "High") {
                                                        <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "Critical") {
                                                        <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Resolved") {
                                                        <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Pending") {
                                                        <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "In Progress") {
                                                        <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Assigned") {
                                                        <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Submitted") {
                                                        <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Closed") {
                                                        <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Cancelled") {
                                                        <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                @if (item.AssignedUser != null) {
                                                        <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                }
                                                else {
                                                        <td></td> }
                                            </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- end col -->
                        </div>
                    </div>
                }

            </div>
        </div>
    </div>
}
else { 
if (User.IsInRole("Submitter")) {
    <div class="row">
        <div class="col-md-12 col-xs-12">
            <div class="white-box">
                <ul class="nav nav-tabs tabs customtab">
                    <li class=" active tab">
                        <a href="#subSubmitter" data-toggle="tab"> <span class="visible-xs"><i class="fa fa-home"></i></span> <span class="hidden-xs">My Submitted Tickets</span> </a>
                    </li>
                </ul>

                <!-- SUBMITTED TICKETS -->
                @if (User.IsInRole("Submitter")) {
                    <div class="tab-pane" id="subSubmitter">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-box table-responsive">
                                    <h3 class="header-title m-t-0 m-b-30">My Submitted Tickets</h3>
                                    <table id="datatable-Submitter" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Title)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketPriorityId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketStatusId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).TicketTypeId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).ProjectId)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Created)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).Updated)</th>
                                                <th>@Html.DisplayNameFor(model => model.AllTickets.First(x => x.OwnerUserId != null).AssignedUserId)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (Model.SubmittedTickets != null) {
                                                foreach (var item in Model.SubmittedTickets) {
                                            <tr>
                                                <td><a href="/Tickets/Details/@item.Id">@Html.DisplayFor(modelItem => item.Title)</a></td>
                                                @if (item.TicketPriority.Name == "Project") {
                                                        <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "Low") {
                                                        <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "Medium") {
                                                        <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "High") {
                                                        <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketPriority.Name == "Critical") {
                                                        <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketPriority.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Resolved") {
                                                        <td class="center_text"><span class="label label-success center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Pending") {
                                                        <td class="center_text"><span class="label label-info center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "In Progress") {
                                                        <td class="center_text"><span class="label label-primary center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Assigned") {
                                                        <td class="center_text"><span class="label label-warning center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Submitted") {
                                                        <td class="center_text"><span class="label label-danger center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Closed") {
                                                        <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                @if (item.TicketStatus.Name == "Cancelled") {
                                                        <td class="center_text"><span class="label label-default center_text">@Html.DisplayFor(modelItem => item.TicketStatus.Name)</span></td>
                                                }
                                                <td class="center_text">@Html.DisplayFor(modelItem => item.TicketType.Name)</td>
                                                <td>@Html.DisplayFor(modelItem => item.Project.Title)</td>
                                                <td>@Html.DisplayFor(modelItem => item.Created)</td>
                                                <td>@Html.DisplayFor(modelItem => item.Updated)</td>
                                                @if (item.AssignedUser != null) {
                                                        <td>@Html.DisplayFor(modelItem => Model.Users.First(u => u.Id == item.AssignedUserId).FullName)</td>
                                                }
                                                else {
                                                        <td></td> }
                                            </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- end col -->
                        </div>
                    </div>
                }

            </div>
        </div>
    </div>
    }
}
}
}

@section Scripts {
    <!-- DataTables -->
    <script src="~/Content/DataTables/datatables.min.js"></script>
    <script>$("#datatable-Submitter").DataTable({ "order": [[0, 'asc'], [3, 'desc'], [4, 'asc']] });</script>
    <script>$("#datatable-Developer").DataTable({ "order": [[0, 'asc'], [3, 'desc'], [4, 'asc']] });</script>
    <script>$("#datatable-ProjectManager").DataTable({ "order": [[0, 'asc'], [3, 'desc'], [4, 'asc']] });</script>
    <script>$("#datatable-AdminPM").DataTable({ "order": [[0, 'asc'], [3, 'desc'], [4, 'asc']] });</script>

}
